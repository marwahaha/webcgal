<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" type="text/css" href="../../assets/stylesheet1.css">
<link rel="stylesheet" href="../../assets/codeEdit.css"/>

<script src="../../assets/jquery.js"></script>
<script src="../../assets/paper.js"></script>
<script src="../../assets/codemirror.js"></script>
<script src="../../assets/scripts.js"></script>    
    
</head>
<body>

<div id="nav">
    <a href="/">
        <!--          <h1>web-cgal</h1>-->
            <img id="logo" width ="100px" height ="100px" src="../../logo.svg"/>
    </a>
  <ul class="menu-root">
    <li class="active"><a data-default="true" href="/">Home</a>
    </li><li class=""><a href="#manual.html" class="">Manuals</a>
    </li>
</ul>
  <ul class = "menu-root">
    <li class=""><a href="#features" class="">Features</a>
        
    </li><li class=""><a href="http://codemirror.net/#browsersupport" class="">Browser support</a>
  </li></ul>
      
    
    
        <ul class="menu-root">
        <li><a href="/examples" class="active">Examples</a>
        </li>
            
            <ul class="menu-sub">
                <li><a href="../simpleDraw/">Simple Draw</a>
                    </li>
                <li><a href="../boolean">Boolean Process</a>
                    </li>                
                <li><a href="../L-monoton/">L-monoton Polygon</a>
                    </li>                
                <li><a href="../duality/">Duality</a>
                    </li>
                <li><a class="active" href=".">Smallest Enclosure Disk</a>
                    </li>
            </ul>
</ul>
</div>
    
    <article>

        
    <div class="paperscript">
<div class="buttons">
<div class="button run">Source</div>
</div>
        
<script src="../../assets/nerdamer/nerdamer.core.js"></script>        
<script src="../../assets/nerdamer/Algebra.js"></script>        
<script src="../../assets/nerdamer/Calculus.js"></script>        
<script src="../../assets/nerdamer/Solve.js"></script>        
<script type="text/paperscript" canvas="canvas-1">
var points = [];
var drawables = [];

///////////////////////////////     event handling  ///////////////////////////////////

function onMouseDown(event) { 
    points.push(event.point);
    refreshPoints();
    miniDisc(points)
}

////////////////////////////////////     Visual Part      ////////////////////////////

function refreshPoints(){
    for(i=0; i<drawables.length; i++) // it is for lines, circles, texts etc.
        drawables[i].remove();
    
    for(k=0; k < points.length; k++)
    {
        drawables.push(new Path.Circle({ name: 'vertice-'+k, center: points[k], radius: 5, fillColor: 'black'}));
        drawables.push(new PointText({ point: points[k] + [5, -5], fontSize: '16px', fillColor: 'black', content: ' '+ k}));  
    }
}

function drawCircle(circle){
        drawables.push(new Path.Circle({ name: 'circle', center: circle.center, radius: circle.r, strokeColor: 'black'}));
}

////////////////////// Smallest Disk Functions  ////////////////////////////

function shuffle(a) {
    var result = [], j, i, temp = a.slice(0); // copy the content
    
    for (i = temp.length; i; i--) {
        j = Math.floor(Math.random() * i);
        result.push(temp[j])
        temp.splice(j, 1) //bu eksiltme işlemi burada gerçekleşiyor
    }
    return result;
}

function miniDisc(points){
    var ps = shuffle(points);
    var lastCircle = getCenterAndRadius2(ps[0], ps[1]);
    
    for(i=2; i<ps.length; i++)
        if(inCircle(lastCircle.center, lastCircle.r, ps[i]) > 0)
            lastCircle = miniDiscWithPoint(ps.slice(0, i), ps[i])
        
    drawCircle(lastCircle);   
}

function miniDiscWithPoint(points, q){
    var ps = shuffle(points);
    var lastCircle = getCenterAndRadius2(ps[0], q);

    for(j=1; j<ps.length; j++)
        if(inCircle(lastCircle.center, lastCircle.r, ps[j]) > 0)
            lastCircle = miniDiscWitTwoPoints(ps.slice(0, j), ps[j], q)  
    
    return lastCircle;
}

function miniDiscWitTwoPoints(points, q1, q2){

    var lastCircle = getCenterAndRadius2(q1, q2);
    
    for(k=0; k<points.length; k++)
        if(inCircle(lastCircle.center, lastCircle.r, points[k]) > 0)
            lastCircle = getCenterAndRadius3(q1, q2, points[k]);
        
    return lastCircle;
}

///////////////////////////////////    Circle Operation    ////////////////////////////////

function getCenterAndRadius3(p1, p2, p3){

    var eq1 = p1.x*p1.x + p1.y*p1.y +'+'+p1.x+'*d+'+p1.y+'*e+f=0';
    var eq2 = p2.x*p2.x + p2.y*p2.y +'+'+p2.x+'*d+'+p2.y+'*e+f=0';
    var eq3 = p3.x*p3.x + p3.y*p3.y +'+'+p3.x+'*d+'+p3.y+'*e+f=0';

    var sol = nerdamer.solveEquations([eq1, eq2, eq3]);
    
    var x = sol[0][1]/-2;
    var y = sol[1][1]/-2;
    
    var res = x*x + y*y+'+'+sol[0][1]+'*x+'+sol[1][1]+'*y+'+sol[2][1];
    var r2 = nerdamer(res, {x:x, y:y}, 'numer');
    var r = Math.sqrt(Math.abs(parseInt(r2.toString())));
    
    return {center: new Point(x,y), r:r}
}

function getCenterAndRadius2(p1, p2){
    return {center: (p1+p2)/2, r:(p1.getDistance(p2)/2)}
}

function inCircle(center, radius, p){
    return Math.sqrt(Math.pow(p.x-center.x, 2)+ Math.pow(p.y-center.y, 2)) - radius;
}


///////////////////////////////////////////    Main   //////////////////////////////////////

function initialPoints(){
    var pos = [[270, 148], [260, 339], [214, 213], [315, 213], [250, 284], [411, 227]];
    for(i=0; i < pos.length; i++)
        points.push(new Point(pos[i][0], pos[i][1]))   
}

//end-script/////////////////////////////////////////////////////////////////////////////////

initialPoints();
refreshPoints();
miniDisc(points);

function convexHull(polygon){
    
    var data = getDataFromPath(polygon);    
    data.sort(function(a, b) {return a[0] - b[0];});
    N = points.length;
    center = [numeric.sum(getCol(data, 0))/N, numeric.sum(getCol(data, 1))/N];
}

</script>
            

<div class="canvas">
    <canvas width="900px" height="1000px" id="canvas-1"></canvas>
</div>
    
        
</div>
        
        
    </article>    
<script>

</script>
</body>
</html>

